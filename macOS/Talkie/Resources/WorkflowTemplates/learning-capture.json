{
  "name": "Learning Capture",
  "description": "Voice notes while reading or learning, saved to Obsidian with auto-tags and backlinks",
  "icon": "book.pages",
  "color": "indigo",
  "maintainer": "talkie",
  "steps": [
    {
      "type": "llm",
      "outputKey": "extracted",
      "costTier": "balanced",
      "prompt": "Analyze this learning note and extract:\n\n{{TRANSCRIPT}}\n\nReturn JSON:\n{\n  \"mainTopic\": \"primary subject being learned\",\n  \"concepts\": [\"concept1\", \"concept2\"],\n  \"keyInsight\": \"the core insight or aha moment\",\n  \"relatedTopics\": [\"related1\", \"related2\"],\n  \"questions\": [\"questions raised or to explore\"],\n  \"source\": \"book/video/article name if mentioned, else null\"\n}",
      "systemPrompt": "You help organize learning notes. Extract concepts precisely - these become Obsidian links. Keep insights concise but preserve the aha moment.",
      "temperature": 0.3,
      "maxTokens": 1024
    },
    {
      "type": "transform",
      "outputKey": "parsed",
      "operation": "extractJSON",
      "parameters": {
        "fallback": "{\"mainTopic\": \"Learning Note\", \"concepts\": [], \"keyInsight\": \"\", \"relatedTopics\": [], \"questions\": []}"
      }
    },
    {
      "type": "llm",
      "outputKey": "formatted",
      "costTier": "budget",
      "prompt": "Format this as an Obsidian note with wiki-style backlinks:\n\nMain Topic: {{parsed.mainTopic}}\nConcepts: {{parsed.concepts}}\nKey Insight: {{parsed.keyInsight}}\nRelated: {{parsed.relatedTopics}}\nQuestions: {{parsed.questions}}\nSource: {{parsed.source}}\n\nOriginal transcript:\n{{TRANSCRIPT}}\n\nRules:\n- Use [[Concept Name]] for all concepts and related topics\n- Add a ## Key Insight section with the core aha moment\n- Add ## Questions section if there are open questions\n- Add ## Raw Notes with a cleaned-up version of the transcript\n- Keep it scannable - use bullets not paragraphs\n- If source mentioned, add ## Source with link placeholder",
      "temperature": 0.3,
      "maxTokens": 2048
    },
    {
      "type": "llm",
      "outputKey": "tags",
      "costTier": "budget",
      "prompt": "Generate 3-5 Obsidian tags for this learning note:\n\nTopic: {{parsed.mainTopic}}\nConcepts: {{parsed.concepts}}\n\nReturn ONLY a comma-separated list of lowercase tags without # symbol.\nExample: swift, concurrency, ios-development, async-await",
      "temperature": 0.2,
      "maxTokens": 100
    },
    {
      "type": "saveFile",
      "outputKey": "saved",
      "filename": "{{DATE}}-{{parsed.mainTopic}}.md",
      "directory": "@Obsidian/Learning",
      "content": "---\ncreated: {{DATE}}\ntags: [{{tags}}, learning]\ntopic: \"{{parsed.mainTopic}}\"\n---\n\n# {{parsed.mainTopic}}\n\n{{formatted}}",
      "appendIfExists": false
    },
    {
      "type": "conditional",
      "outputKey": "hasQuestions",
      "condition": "{{parsed.questions.length}} > 0",
      "thenSteps": [6],
      "elseSteps": []
    },
    {
      "type": "appleReminders",
      "outputKey": "reminder",
      "listName": "Learning",
      "title": "Review: {{parsed.mainTopic}}",
      "notes": "Questions to explore:\n{{parsed.questions}}\n\nNote: @Obsidian/Learning/{{DATE}}-{{parsed.mainTopic}}.md",
      "dueDate": "{{NOW+3d}}",
      "priority": 9
    },
    {
      "type": "notification",
      "outputKey": "notified",
      "title": "Learning captured",
      "body": "{{parsed.mainTopic}} saved to Obsidian",
      "sound": true
    }
  ]
}
