{
  "name": "Brain Dump Processor",
  "description": "Capture freeform brainstorms, extract ideas, create next actions, and save to your idea garden",
  "icon": "brain.head.profile",
  "color": "purple",
  "maintainer": "talkie",
  "steps": [
    {
      "type": "transcribe",
      "outputKey": "transcript",
      "qualityTier": "balanced",
      "fallbackStrategy": "automatic",
      "overwriteExisting": false,
      "saveAsVersion": true
    },
    {
      "type": "llm",
      "outputKey": "extracted",
      "provider": "gemini",
      "modelId": "gemini-2.0-flash",
      "prompt": "You are a personal thinking partner. Analyze this voice brainstorm and extract the distinct ideas.\n\nTranscript:\n{{transcript}}\n\nFor each idea found, categorize it as: project, someday, reference, or actionable.\n\nReturn as JSON:\n{\n  \"ideas\": [{\"title\": \"short title\", \"description\": \"1-2 sentences\", \"category\": \"project|someday|reference|actionable\"}],\n  \"nextActions\": [\"specific next step to take\"],\n  \"connections\": \"any interesting connections between ideas\"\n}",
      "systemPrompt": "You help people capture and organize their creative thinking. Be concise but insightful.",
      "temperature": 0.5,
      "maxTokens": 2048,
      "topP": 0.9
    },
    {
      "type": "transform",
      "outputKey": "parsed",
      "operation": "extractJSON",
      "parameters": {
        "path": "$",
        "fallback": "{\"ideas\": [], \"nextActions\": []}"
      }
    },
    {
      "type": "conditional",
      "outputKey": "hasActions",
      "condition": "{{parsed.nextActions.length}} > 0",
      "thenSteps": [4],
      "elseSteps": []
    },
    {
      "type": "appleReminders",
      "outputKey": "reminder",
      "listName": "Inbox",
      "title": "{{parsed.nextActions[0]}}",
      "notes": "From brainstorm: {{TITLE}}\n\nRelated ideas: {{parsed.ideas[0].title}}",
      "dueDate": "{{NOW+1d}}",
      "priority": 5
    },
    {
      "type": "shell",
      "outputKey": "formattedIdeas",
      "executable": "/opt/homebrew/bin/jq",
      "arguments": ["-r", ".ideas | map(\"- **\" + .title + \"** (\" + .category + \"): \" + .description) | join(\"\\n\")"],
      "stdin": "{{extracted}}",
      "timeout": 10,
      "captureStderr": true
    },
    {
      "type": "llm",
      "outputKey": "polished",
      "provider": "gemini",
      "modelId": "gemini-2.0-flash",
      "prompt": "Format this into a clean markdown note for my idea garden:\n\nIdeas:\n{{formattedIdeas}}\n\nConnections:\n{{parsed.connections}}\n\nNext Actions:\n{{parsed.nextActions}}\n\nCreate a brief, scannable note with emoji headers. Keep it concise.",
      "temperature": 0.3,
      "maxTokens": 1024,
      "topP": 0.9
    },
    {
      "type": "llm",
      "outputKey": "research",
      "provider": "openai",
      "modelId": "gpt-4o",
      "prompt": "Based on these brainstormed ideas, suggest:\n1. Related concepts worth exploring\n2. Potential connections to other fields\n3. One actionable experiment to test the most promising idea\n\nIdeas:\n{{parsed.ideas}}\n\nBe concise and practical. Focus on sparking further thinking.",
      "systemPrompt": "You are a creative thinking partner who helps expand ideas with cross-disciplinary insights.",
      "temperature": 0.7,
      "maxTokens": 1024,
      "topP": 0.9
    },
    {
      "type": "saveFile",
      "outputKey": "savedNote",
      "filename": "{{DATE}}-{{TITLE}}.md",
      "directory": "@Obsidian/Ideas",
      "content": "---\ncreated: {{DATE}}\ntags: [braindump, ideas]\n---\n\n# {{TITLE}}\n\n{{polished}}\n\n## Research Notes\n{{research}}\n\n---\n*Captured via Talkie*",
      "appendIfExists": false
    },
    {
      "type": "iOSPush",
      "outputKey": "notified",
      "title": "Ideas Captured",
      "body": "{{parsed.ideas.length}} ideas saved to your garden",
      "sound": true,
      "includeOutput": false
    }
  ]
}
