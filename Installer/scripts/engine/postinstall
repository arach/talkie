#!/bin/bash
# Load the TalkieEngine LaunchAgent for the current user

CONSOLE_USER=$(stat -f "%Su" /dev/console)
CONSOLE_UID=$(id -u "$CONSOLE_USER")

if [ "$CONSOLE_USER" != "root" ]; then
    launchctl bootstrap gui/$CONSOLE_UID /Library/LaunchAgents/jdi.talkie.engine.plist 2>/dev/null || true
    launchctl kickstart -k gui/$CONSOLE_UID/jdi.talkie.engine 2>/dev/null || true
fi

exit 0
